use client
import { useEffect,useState } from 'react'
import { supabase } from '@/lib/supabaseClient'
export default function Shifts(){const [mine,setMine]=useState([]); const [released,setReleased]=useState([]); useEffect(()=>{ supabase.auth.getUser().then(async ({data})=>{ const uid=data?.user?.id; if(!uid) return; const { data:s1 } = await supabase.from('shifts').select('*').eq('user_id',uid).gte('start_at',new Date().toISOString()).order('start_at'); setMine(s1||[]); const { data:s2 } = await supabase.from('shifts').select('*').is('user_id',null).eq('released',true).order('start_at'); setReleased(s2||[]) }) },[]); return (<div className='space-y-4'><div className='card'><h1 className='text-xl font-bold'>My Upcoming Shifts</h1></div>{mine.length?mine.map(s=>(<div key={s.id} className='card'>{new Date(s.start_at).toLocaleString()} → {new Date(s.end_at).toLocaleString()}</div>)):<div className='card'>No upcoming shifts.</div>}<div className='card'><h2 className='text-lg font-semibold'>Released Board</h2>{released.length?released.map(s=>(<div key={s.id} className='mt-2'>{new Date(s.start_at).toLocaleString()} → {new Date(s.end_at).toLocaleString()}</div>)):<p className='text-sm'>No released shifts right now.</p>}</div></div>) }
