use client
import { useState } from 'react'
export default function ReportsPage(){ const [kind,setKind]=useState('monthly'); const [busy,setBusy]=useState(false); const [msg,setMsg]=useState(''); async function download(type){ setBusy(true); setMsg(''); try{ const res=await fetch('/api/reports/payroll/download',{method:'POST',headers:{'content-type':'application/json'},body:JSON.stringify({kind,type})}); if(!res.ok){const j=await res.json(); throw new Error(j.error||'Failed')} const blob=await res.blob(); const a=document.createElement('a'); const url=URL.createObjectURL(blob); a.href=url; a.download=`report.${type}`; a.click(); URL.revokeObjectURL(url) }catch(e){ setMsg(e.message) } finally{ setBusy(false) } } return (<div className='space-y-4'><div className='card space-y-3'><h1 className='text-xl font-bold'>Reports</h1><div className='grid grid-cols-1 sm:grid-cols-3 gap-3'><select className='input' value={kind} onChange={e=>setKind(e.target.value)}><option value='weekly'>Weekly</option><option value='biweekly'>Bi-Weekly</option><option value='monthly'>Monthly</option></select><button disabled={busy} className='btn btn-primary' onClick={()=>download('csv')}>Download CSV</button><button disabled={busy} className='btn btn-outline' onClick={()=>download('xlsx')}>Download XLSX</button></div>{msg&&<div className='text-sm text-gray-700'>{msg}</div>}</div></div>) }
