use client
import { useEffect,useState } from 'react'
import { supabase } from '@/lib/supabaseClient'
export default function SettingsPage(){ const [rows,setRows]=useState([]); const [radius,setRadius]=useState(150); const [grace,setGrace]=useState(0); async function load(){ const { data } = await supabase.from('stores').select('*').eq('active',true); setRows(data||[]); if(data?.length){ setRadius(data[0].radius_m||150); setGrace(data[0].grace_m||0) } } useEffect(()=>{ load() },[]); async function save(){ if(!rows.length) return alert('Create a store row first in Supabase.'); await supabase.from('stores').update({radius_m:radius,grace_m:grace}).eq('id',rows[0].id); alert('Saved') } return (<div className='card space-y-3'><h1 className='text-xl font-bold'>Settings</h1><div className='grid grid-cols-1 sm:grid-cols-2 gap-3'><div><label className='label'>Geo-fence Radius (m)</label><input type='number' className='input' value={radius} onChange={e=>setRadius(parseInt(e.target.value||'0'))}/></div><div><label className='label'>Geo-fence Grace (m)</label><input type='number' className='input' value={grace} onChange={e=>setGrace(parseInt(e.target.value||'0'))}/></div></div><button className='btn btn-primary' onClick={save}>Save</button></div>) }
